{"version":3,"sources":["webpack:///webpack/bootstrap 3e012d885063be18e255","webpack:///external \"react\"","webpack:///external \"react-relay\"","webpack:///external \"lodash\"","webpack:///external \"react-bootstrap\"","webpack:///external \"keystone\"","webpack:///external \"graphql\"","webpack:///external \"react-router\"","webpack:///./lib/app/components/NavLink.js","webpack:///external \"graphql-relay\"","webpack:///./lib/app/components/SearchBar.js","webpack:///./lib/server/graphql/crud.js","webpack:///./lib/server/graphql/types/Song.js","webpack:///external \"classnames\"","webpack:///./logger.js","webpack:///external \"body-parser\"","webpack:///external \"path\"","webpack:///./lib/server/graphql/types/Node.js","webpack:///external \"algoliasearch\"","webpack:///external \"winston\"","webpack:///./lib/server/routes/react.js","webpack:///external \"bluebird\"","webpack:///external \"compression\"","webpack:///external \"connect-history-api-fallback\"","webpack:///external \"connect-mongo\"","webpack:///external \"cookie-parser\"","webpack:///external \"cors\"","webpack:///external \"dotenv\"","webpack:///external \"express\"","webpack:///external \"express-handlebars\"","webpack:///external \"express-session\"","webpack:///external \"mongoose\"","webpack:///external \"morgan\"","webpack:///external \"nconf\"","webpack:///external \"request-ip\"","webpack:///external \"serve-favicon\"","webpack:///./lib/app/components/Layout/Base.js","webpack:///./lib/app/components/Layout/Header.js","webpack:///./lib/app/components/MostViewedItem.js","webpack:///./lib/app/components/MostViewedList.js","webpack:///./lib/app/queries/Song.js","webpack:///./lib/app/queries/Viewer.js","webpack:///./lib/app/routes.js","webpack:///./lib/app/views/About.js","webpack:///./lib/app/views/App.js","webpack:///./lib/app/views/Home.js","webpack:///./lib/app/views/Search.js","webpack:///./lib/app/views/Song.js","webpack:///./lib/app/views/SongsList.js","webpack:///./lib/server/graphql/graphqlHTTP.js","webpack:///./lib/server/graphql/query.js","webpack:///./lib/server/graphql/types/Viewer.js","webpack:///./lib/server/routes/api/songs.js","webpack:///external \"async\"","webpack:///external \"express-graphql\"","webpack:///external \"isomorphic-relay-router\"","webpack:///external \"react-addons-css-transition-group\"","webpack:///external \"react-dom\"","webpack:///external \"react-dom/server\"","webpack:///external \"react-paginate\"","webpack:///external \"react-router-bootstrap\"","webpack:///external \"react-router-relay\"","webpack:///external \"winston-daily-rotate-file\"","webpack:///./keystone.js"],"names":["createClass","render","props","SearchBar","state","placeholder","formClass","style","onSubmit","onChange","value","Component","_","require","logger","buildFind","model","args","opts","doc","query","where","projection","skip","limit","sort","sortField","startsWith","trimStart","book","language","first","after","x","find","execAsync","then","results","catch","err","log","buildFindOne","data","findByIdAsync","id","result","queryBuilder","op","module","exports","buildSchema","GraphQLInt","GraphQLList","GraphQLObjectType","GraphQLSchema","GraphQLString","GraphQLID","GraphQLBoolean","GraphQLNonNull","GraphQLInputObjectType","Graphql","connectionArgs","connectionDefinitions","connectionFromArray","cursorForObjectInConnection","fromGlobalId","globalIdField","mutationWithClientMutationId","nodeDefinitions","toGlobalId","nodeInterface","nodeField","SongType","name","fields","title","type","num","abbrv","languages","lyrics","lyrics_Markdown","md","html","lyrics_Html","tags","videos","references","author","year","partitions","songId","meta","totalViews","stats","week","day","views","interfaces","winston","Logger","transports","DailyRotateFile","filename","datePattern","prepend","level","exitOnError","stream","write","message","encoding","info","keystone","db","globalId","console","list","obj","GRAPHQL_URL","networkLayer","DefaultNetworkLayer","app","use","json","__dirname","get","req","res","next","path","match","routes","location","url","redirect","status","send","pathname","search","prepareData","reactOutput","renderToString","preloadedData","Base","cloneElement","children","key","App","MostViewedItem","song","createContainer","fragments","MostViewedList","_renderList","viewer","songs","edges","map","node","initialVariables","prepareVariables","prevVariables","getFragment","queries","songByLocalID","injectNetworkLayer","Store","algoliaClient","timeout","Home","_search","e","preventDefault","target","charCode","alert","push","_updateValue","setState","_renderMostViewed","index","initIndex","maxWidth","relay","variables","Search","_fetchSearchResults","hitsPerPage","page","content","hits","nbHits","nbPages","processingTimeMS","_handlePageClick","selected","_renderSongs","lang","lowerCase","_id","__html","_highlightResult","_snippetResult","for","width","Song","SongsList","filteredData","params","_fetchLanguage","event","activeLanguage","setVariables","_handleSongSelect","context","router","_filterSongs","str","_removeAccentsByRegex","filtered","filter","indexOf","s","r","replace","RegExp","borderColorClass","bind","nextProps","paddingBottom","contextTypes","PropTypes","object","upperCase","graphqlHTTP","QueryType","initGraphQL","schema","graphiql","Viewer","resolve","root","connectionFromPromisedArray","songConnection","collection","nodeType","connectionType","async","capitalize","items","apiError","findById","exec","item","config","handlebars","compression","cors","bodyParser","cookieParser","session","MongoStore","express","favicon","mongoose","Promise","requestIp","history","nconf","file","promisifyAll","setHeader","sendFile","static","urlencoded","extended","join","init","options","import","set","env","utils","editable","posts","users","start"],"mappings":";AAAA,oDAA4C;AAC5C;AACA;AACA;;AAEA,0CAAkC;AAClC;AACA;AACA,YAAI;AACJ;AACA;AACA;AACA;;AAEA,6CAAqC;AACrC;AACA;;;;AAIA;AACA,sDAA8C;AAC9C;AACA,mCAA2B;AAC3B,qCAA6B;AAC7B,yCAAiC;;AAEjC,+CAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAM;AACN;AACA;AACA,aAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAM;;AAEN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAI;AACJ;AACA;;AAEA,8CAAsC;AACtC;AACA;AACA,qCAA6B;AAC7B,qCAA6B;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAAoB,gBAAgB;AACpC;AACA;AACA;AACA,aAAK;AACL;AACA;AACA;AACA;AACA,4BAAoB,gBAAgB;AACpC;AACA;AACA;AACA,aAAK;AACL;AACA;AACA,aAAK;AACL;AACA;AACA,aAAK;AACL;AACA;AACA;AACA,aAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA,aAAK;AACL;AACA;AACA;AACA,aAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,yBAAiB,8BAA8B;AAC/C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA,aAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAI;AACJ;;AAEA,4DAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA,aAAK;AACL,YAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAAmB,2BAA2B;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAAkB,cAAc;AAChC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAa,4BAA4B;AACzC;AACA;AACA;AACA;AACA;AACA,cAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,sBAAc,4BAA4B;AAC1C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,sBAAc,4BAA4B;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAgB,uCAAuC;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAe,uCAAuC;AACtD;AACA;AACA;AACA;AACA;AACA,uBAAe,sBAAsB;AACrC;AACA;AACA;AACA,eAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,iBAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAa,wCAAwC;AACrD;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA;AACA,eAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,iBAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAM;AACN;AACA;AACA;AACA;AACA;AACA,gBAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA,8CAAsC,uBAAuB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","file":"server.bundle.js","sourcesContent":[" \tfunction hotDownloadUpdateChunk(chunkId) { // eslint-disable-line no-unused-vars\r\n \t\tvar chunk = require(\"./\" + \"\" + chunkId + \".\" + hotCurrentHash + \".hot-update.js\");\r\n \t\thotAddUpdateChunk(chunk.id, chunk.modules);\r\n \t}\r\n \t\r\n \tfunction hotDownloadManifest() { // eslint-disable-line no-unused-vars\r\n \t\ttry {\r\n \t\t\tvar update = require(\"./\" + \"\" + hotCurrentHash + \".hot-update.json\");\r\n \t\t} catch(e) {\r\n \t\t\treturn Promise.resolve();\r\n \t\t}\r\n \t\treturn Promise.resolve(update);\r\n \t}\r\n \t\r\n \tfunction hotDisposeChunk(chunkId) { //eslint-disable-line no-unused-vars\r\n \t\tdelete installedChunks[chunkId];\r\n \t}\r\n\n \t\r\n \t\r\n \tvar hotApplyOnUpdate = true;\r\n \tvar hotCurrentHash = \"3e012d885063be18e255\"; // eslint-disable-line no-unused-vars\r\n \tvar hotCurrentModuleData = {};\r\n \tvar hotMainModule = true; // eslint-disable-line no-unused-vars\r\n \tvar hotCurrentParents = []; // eslint-disable-line no-unused-vars\r\n \tvar hotCurrentParentsTemp = []; // eslint-disable-line no-unused-vars\r\n \t\r\n \tfunction hotCreateRequire(moduleId) { // eslint-disable-line no-unused-vars\r\n \t\tvar me = installedModules[moduleId];\r\n \t\tif(!me) return __webpack_require__;\r\n \t\tvar fn = function(request) {\r\n \t\t\tif(me.hot.active) {\r\n \t\t\t\tif(installedModules[request]) {\r\n \t\t\t\t\tif(installedModules[request].parents.indexOf(moduleId) < 0)\r\n \t\t\t\t\t\tinstalledModules[request].parents.push(moduleId);\r\n \t\t\t\t} else hotCurrentParents = [moduleId];\r\n \t\t\t\tif(me.children.indexOf(request) < 0)\r\n \t\t\t\t\tme.children.push(request);\r\n \t\t\t} else {\r\n \t\t\t\tconsole.warn(\"[HMR] unexpected require(\" + request + \") from disposed module \" + moduleId);\r\n \t\t\t\thotCurrentParents = [];\r\n \t\t\t}\r\n \t\t\thotMainModule = false;\r\n \t\t\treturn __webpack_require__(request);\r\n \t\t};\r\n \t\tvar ObjectFactory = function ObjectFactory(name) {\r\n \t\t\treturn {\r\n \t\t\t\tconfigurable: true,\r\n \t\t\t\tenumerable: true,\r\n \t\t\t\tget: function() {\r\n \t\t\t\t\treturn __webpack_require__[name];\r\n \t\t\t\t},\r\n \t\t\t\tset: function(value) {\r\n \t\t\t\t\t__webpack_require__[name] = value;\r\n \t\t\t\t}\r\n \t\t\t};\r\n \t\t};\r\n \t\tfor(var name in __webpack_require__) {\r\n \t\t\tif(Object.prototype.hasOwnProperty.call(__webpack_require__, name)) {\r\n \t\t\t\tObject.defineProperty(fn, name, ObjectFactory(name));\r\n \t\t\t}\r\n \t\t}\r\n \t\tObject.defineProperty(fn, \"e\", {\r\n \t\t\tenumerable: true,\r\n \t\t\tvalue: function(chunkId) {\r\n \t\t\t\tif(hotStatus === \"ready\")\r\n \t\t\t\t\thotSetStatus(\"prepare\");\r\n \t\t\t\thotChunksLoading++;\r\n \t\t\t\treturn __webpack_require__.e(chunkId).then(finishChunkLoading, function(err) {\r\n \t\t\t\t\tfinishChunkLoading();\r\n \t\t\t\t\tthrow err;\r\n \t\t\t\t});\r\n \t\r\n \t\t\t\tfunction finishChunkLoading() {\r\n \t\t\t\t\thotChunksLoading--;\r\n \t\t\t\t\tif(hotStatus === \"prepare\") {\r\n \t\t\t\t\t\tif(!hotWaitingFilesMap[chunkId]) {\r\n \t\t\t\t\t\t\thotEnsureUpdateChunk(chunkId);\r\n \t\t\t\t\t\t}\r\n \t\t\t\t\t\tif(hotChunksLoading === 0 && hotWaitingFiles === 0) {\r\n \t\t\t\t\t\t\thotUpdateDownloaded();\r\n \t\t\t\t\t\t}\r\n \t\t\t\t\t}\r\n \t\t\t\t}\r\n \t\t\t}\r\n \t\t});\r\n \t\treturn fn;\r\n \t}\r\n \t\r\n \tfunction hotCreateModule(moduleId) { // eslint-disable-line no-unused-vars\r\n \t\tvar hot = {\r\n \t\t\t// private stuff\r\n \t\t\t_acceptedDependencies: {},\r\n \t\t\t_declinedDependencies: {},\r\n \t\t\t_selfAccepted: false,\r\n \t\t\t_selfDeclined: false,\r\n \t\t\t_disposeHandlers: [],\r\n \t\t\t_main: hotMainModule,\r\n \t\r\n \t\t\t// Module API\r\n \t\t\tactive: true,\r\n \t\t\taccept: function(dep, callback) {\r\n \t\t\t\tif(typeof dep === \"undefined\")\r\n \t\t\t\t\thot._selfAccepted = true;\r\n \t\t\t\telse if(typeof dep === \"function\")\r\n \t\t\t\t\thot._selfAccepted = dep;\r\n \t\t\t\telse if(typeof dep === \"object\")\r\n \t\t\t\t\tfor(var i = 0; i < dep.length; i++)\r\n \t\t\t\t\t\thot._acceptedDependencies[dep[i]] = callback || function() {};\r\n \t\t\t\telse\r\n \t\t\t\t\thot._acceptedDependencies[dep] = callback || function() {};\r\n \t\t\t},\r\n \t\t\tdecline: function(dep) {\r\n \t\t\t\tif(typeof dep === \"undefined\")\r\n \t\t\t\t\thot._selfDeclined = true;\r\n \t\t\t\telse if(typeof dep === \"object\")\r\n \t\t\t\t\tfor(var i = 0; i < dep.length; i++)\r\n \t\t\t\t\t\thot._declinedDependencies[dep[i]] = true;\r\n \t\t\t\telse\r\n \t\t\t\t\thot._declinedDependencies[dep] = true;\r\n \t\t\t},\r\n \t\t\tdispose: function(callback) {\r\n \t\t\t\thot._disposeHandlers.push(callback);\r\n \t\t\t},\r\n \t\t\taddDisposeHandler: function(callback) {\r\n \t\t\t\thot._disposeHandlers.push(callback);\r\n \t\t\t},\r\n \t\t\tremoveDisposeHandler: function(callback) {\r\n \t\t\t\tvar idx = hot._disposeHandlers.indexOf(callback);\r\n \t\t\t\tif(idx >= 0) hot._disposeHandlers.splice(idx, 1);\r\n \t\t\t},\r\n \t\r\n \t\t\t// Management API\r\n \t\t\tcheck: hotCheck,\r\n \t\t\tapply: hotApply,\r\n \t\t\tstatus: function(l) {\r\n \t\t\t\tif(!l) return hotStatus;\r\n \t\t\t\thotStatusHandlers.push(l);\r\n \t\t\t},\r\n \t\t\taddStatusHandler: function(l) {\r\n \t\t\t\thotStatusHandlers.push(l);\r\n \t\t\t},\r\n \t\t\tremoveStatusHandler: function(l) {\r\n \t\t\t\tvar idx = hotStatusHandlers.indexOf(l);\r\n \t\t\t\tif(idx >= 0) hotStatusHandlers.splice(idx, 1);\r\n \t\t\t},\r\n \t\r\n \t\t\t//inherit from previous dispose call\r\n \t\t\tdata: hotCurrentModuleData[moduleId]\r\n \t\t};\r\n \t\thotMainModule = true;\r\n \t\treturn hot;\r\n \t}\r\n \t\r\n \tvar hotStatusHandlers = [];\r\n \tvar hotStatus = \"idle\";\r\n \t\r\n \tfunction hotSetStatus(newStatus) {\r\n \t\thotStatus = newStatus;\r\n \t\tfor(var i = 0; i < hotStatusHandlers.length; i++)\r\n \t\t\thotStatusHandlers[i].call(null, newStatus);\r\n \t}\r\n \t\r\n \t// while downloading\r\n \tvar hotWaitingFiles = 0;\r\n \tvar hotChunksLoading = 0;\r\n \tvar hotWaitingFilesMap = {};\r\n \tvar hotRequestedFilesMap = {};\r\n \tvar hotAvailableFilesMap = {};\r\n \tvar hotDeferred;\r\n \t\r\n \t// The update info\r\n \tvar hotUpdate, hotUpdateNewHash;\r\n \t\r\n \tfunction toModuleId(id) {\r\n \t\tvar isNumber = (+id) + \"\" === id;\r\n \t\treturn isNumber ? +id : id;\r\n \t}\r\n \t\r\n \tfunction hotCheck(apply) {\r\n \t\tif(hotStatus !== \"idle\") throw new Error(\"check() is only allowed in idle status\");\r\n \t\thotApplyOnUpdate = apply;\r\n \t\thotSetStatus(\"check\");\r\n \t\treturn hotDownloadManifest().then(function(update) {\r\n \t\t\tif(!update) {\r\n \t\t\t\thotSetStatus(\"idle\");\r\n \t\t\t\treturn null;\r\n \t\t\t}\r\n \t\r\n \t\t\thotRequestedFilesMap = {};\r\n \t\t\thotWaitingFilesMap = {};\r\n \t\t\thotAvailableFilesMap = update.c;\r\n \t\t\thotUpdateNewHash = update.h;\r\n \t\r\n \t\t\thotSetStatus(\"prepare\");\r\n \t\t\tvar promise = new Promise(function(resolve, reject) {\r\n \t\t\t\thotDeferred = {\r\n \t\t\t\t\tresolve: resolve,\r\n \t\t\t\t\treject: reject\r\n \t\t\t\t};\r\n \t\t\t});\r\n \t\t\thotUpdate = {};\r\n \t\t\tvar chunkId = 0;\r\n \t\t\t{ // eslint-disable-line no-lone-blocks\r\n \t\t\t\t/*globals chunkId */\r\n \t\t\t\thotEnsureUpdateChunk(chunkId);\r\n \t\t\t}\r\n \t\t\tif(hotStatus === \"prepare\" && hotChunksLoading === 0 && hotWaitingFiles === 0) {\r\n \t\t\t\thotUpdateDownloaded();\r\n \t\t\t}\r\n \t\t\treturn promise;\r\n \t\t});\r\n \t}\r\n \t\r\n \tfunction hotAddUpdateChunk(chunkId, moreModules) { // eslint-disable-line no-unused-vars\r\n \t\tif(!hotAvailableFilesMap[chunkId] || !hotRequestedFilesMap[chunkId])\r\n \t\t\treturn;\r\n \t\thotRequestedFilesMap[chunkId] = false;\r\n \t\tfor(var moduleId in moreModules) {\r\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\r\n \t\t\t\thotUpdate[moduleId] = moreModules[moduleId];\r\n \t\t\t}\r\n \t\t}\r\n \t\tif(--hotWaitingFiles === 0 && hotChunksLoading === 0) {\r\n \t\t\thotUpdateDownloaded();\r\n \t\t}\r\n \t}\r\n \t\r\n \tfunction hotEnsureUpdateChunk(chunkId) {\r\n \t\tif(!hotAvailableFilesMap[chunkId]) {\r\n \t\t\thotWaitingFilesMap[chunkId] = true;\r\n \t\t} else {\r\n \t\t\thotRequestedFilesMap[chunkId] = true;\r\n \t\t\thotWaitingFiles++;\r\n \t\t\thotDownloadUpdateChunk(chunkId);\r\n \t\t}\r\n \t}\r\n \t\r\n \tfunction hotUpdateDownloaded() {\r\n \t\thotSetStatus(\"ready\");\r\n \t\tvar deferred = hotDeferred;\r\n \t\thotDeferred = null;\r\n \t\tif(!deferred) return;\r\n \t\tif(hotApplyOnUpdate) {\r\n \t\t\thotApply(hotApplyOnUpdate).then(function(result) {\r\n \t\t\t\tdeferred.resolve(result);\r\n \t\t\t}, function(err) {\r\n \t\t\t\tdeferred.reject(err);\r\n \t\t\t});\r\n \t\t} else {\r\n \t\t\tvar outdatedModules = [];\r\n \t\t\tfor(var id in hotUpdate) {\r\n \t\t\t\tif(Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\r\n \t\t\t\t\toutdatedModules.push(toModuleId(id));\r\n \t\t\t\t}\r\n \t\t\t}\r\n \t\t\tdeferred.resolve(outdatedModules);\r\n \t\t}\r\n \t}\r\n \t\r\n \tfunction hotApply(options) {\r\n \t\tif(hotStatus !== \"ready\") throw new Error(\"apply() is only allowed in ready status\");\r\n \t\toptions = options || {};\r\n \t\r\n \t\tvar cb;\r\n \t\tvar i;\r\n \t\tvar j;\r\n \t\tvar module;\r\n \t\tvar moduleId;\r\n \t\r\n \t\tfunction getAffectedStuff(updateModuleId) {\r\n \t\t\tvar outdatedModules = [updateModuleId];\r\n \t\t\tvar outdatedDependencies = {};\r\n \t\r\n \t\t\tvar queue = outdatedModules.slice().map(function(id) {\r\n \t\t\t\treturn {\r\n \t\t\t\t\tchain: [id],\r\n \t\t\t\t\tid: id\r\n \t\t\t\t};\r\n \t\t\t});\r\n \t\t\twhile(queue.length > 0) {\r\n \t\t\t\tvar queueItem = queue.pop();\r\n \t\t\t\tvar moduleId = queueItem.id;\r\n \t\t\t\tvar chain = queueItem.chain;\r\n \t\t\t\tmodule = installedModules[moduleId];\r\n \t\t\t\tif(!module || module.hot._selfAccepted)\r\n \t\t\t\t\tcontinue;\r\n \t\t\t\tif(module.hot._selfDeclined) {\r\n \t\t\t\t\treturn {\r\n \t\t\t\t\t\ttype: \"self-declined\",\r\n \t\t\t\t\t\tchain: chain,\r\n \t\t\t\t\t\tmoduleId: moduleId\r\n \t\t\t\t\t};\r\n \t\t\t\t}\r\n \t\t\t\tif(module.hot._main) {\r\n \t\t\t\t\treturn {\r\n \t\t\t\t\t\ttype: \"unaccepted\",\r\n \t\t\t\t\t\tchain: chain,\r\n \t\t\t\t\t\tmoduleId: moduleId\r\n \t\t\t\t\t};\r\n \t\t\t\t}\r\n \t\t\t\tfor(var i = 0; i < module.parents.length; i++) {\r\n \t\t\t\t\tvar parentId = module.parents[i];\r\n \t\t\t\t\tvar parent = installedModules[parentId];\r\n \t\t\t\t\tif(!parent) continue;\r\n \t\t\t\t\tif(parent.hot._declinedDependencies[moduleId]) {\r\n \t\t\t\t\t\treturn {\r\n \t\t\t\t\t\t\ttype: \"declined\",\r\n \t\t\t\t\t\t\tchain: chain.concat([parentId]),\r\n \t\t\t\t\t\t\tmoduleId: moduleId,\r\n \t\t\t\t\t\t\tparentId: parentId\r\n \t\t\t\t\t\t};\r\n \t\t\t\t\t}\r\n \t\t\t\t\tif(outdatedModules.indexOf(parentId) >= 0) continue;\r\n \t\t\t\t\tif(parent.hot._acceptedDependencies[moduleId]) {\r\n \t\t\t\t\t\tif(!outdatedDependencies[parentId])\r\n \t\t\t\t\t\t\toutdatedDependencies[parentId] = [];\r\n \t\t\t\t\t\taddAllToSet(outdatedDependencies[parentId], [moduleId]);\r\n \t\t\t\t\t\tcontinue;\r\n \t\t\t\t\t}\r\n \t\t\t\t\tdelete outdatedDependencies[parentId];\r\n \t\t\t\t\toutdatedModules.push(parentId);\r\n \t\t\t\t\tqueue.push({\r\n \t\t\t\t\t\tchain: chain.concat([parentId]),\r\n \t\t\t\t\t\tid: parentId\r\n \t\t\t\t\t});\r\n \t\t\t\t}\r\n \t\t\t}\r\n \t\r\n \t\t\treturn {\r\n \t\t\t\ttype: \"accepted\",\r\n \t\t\t\tmoduleId: updateModuleId,\r\n \t\t\t\toutdatedModules: outdatedModules,\r\n \t\t\t\toutdatedDependencies: outdatedDependencies\r\n \t\t\t};\r\n \t\t}\r\n \t\r\n \t\tfunction addAllToSet(a, b) {\r\n \t\t\tfor(var i = 0; i < b.length; i++) {\r\n \t\t\t\tvar item = b[i];\r\n \t\t\t\tif(a.indexOf(item) < 0)\r\n \t\t\t\t\ta.push(item);\r\n \t\t\t}\r\n \t\t}\r\n \t\r\n \t\t// at begin all updates modules are outdated\r\n \t\t// the \"outdated\" status can propagate to parents if they don't accept the children\r\n \t\tvar outdatedDependencies = {};\r\n \t\tvar outdatedModules = [];\r\n \t\tvar appliedUpdate = {};\r\n \t\r\n \t\tvar warnUnexpectedRequire = function warnUnexpectedRequire() {\r\n \t\t\tconsole.warn(\"[HMR] unexpected require(\" + result.moduleId + \") to disposed module\");\r\n \t\t};\r\n \t\r\n \t\tfor(var id in hotUpdate) {\r\n \t\t\tif(Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\r\n \t\t\t\tmoduleId = toModuleId(id);\r\n \t\t\t\tvar result;\r\n \t\t\t\tif(hotUpdate[id]) {\r\n \t\t\t\t\tresult = getAffectedStuff(moduleId);\r\n \t\t\t\t} else {\r\n \t\t\t\t\tresult = {\r\n \t\t\t\t\t\ttype: \"disposed\",\r\n \t\t\t\t\t\tmoduleId: id\r\n \t\t\t\t\t};\r\n \t\t\t\t}\r\n \t\t\t\tvar abortError = false;\r\n \t\t\t\tvar doApply = false;\r\n \t\t\t\tvar doDispose = false;\r\n \t\t\t\tvar chainInfo = \"\";\r\n \t\t\t\tif(result.chain) {\r\n \t\t\t\t\tchainInfo = \"\\nUpdate propagation: \" + result.chain.join(\" -> \");\r\n \t\t\t\t}\r\n \t\t\t\tswitch(result.type) {\r\n \t\t\t\t\tcase \"self-declined\":\r\n \t\t\t\t\t\tif(options.onDeclined)\r\n \t\t\t\t\t\t\toptions.onDeclined(result);\r\n \t\t\t\t\t\tif(!options.ignoreDeclined)\r\n \t\t\t\t\t\t\tabortError = new Error(\"Aborted because of self decline: \" + result.moduleId + chainInfo);\r\n \t\t\t\t\t\tbreak;\r\n \t\t\t\t\tcase \"declined\":\r\n \t\t\t\t\t\tif(options.onDeclined)\r\n \t\t\t\t\t\t\toptions.onDeclined(result);\r\n \t\t\t\t\t\tif(!options.ignoreDeclined)\r\n \t\t\t\t\t\t\tabortError = new Error(\"Aborted because of declined dependency: \" + result.moduleId + \" in \" + result.parentId + chainInfo);\r\n \t\t\t\t\t\tbreak;\r\n \t\t\t\t\tcase \"unaccepted\":\r\n \t\t\t\t\t\tif(options.onUnaccepted)\r\n \t\t\t\t\t\t\toptions.onUnaccepted(result);\r\n \t\t\t\t\t\tif(!options.ignoreUnaccepted)\r\n \t\t\t\t\t\t\tabortError = new Error(\"Aborted because \" + moduleId + \" is not accepted\" + chainInfo);\r\n \t\t\t\t\t\tbreak;\r\n \t\t\t\t\tcase \"accepted\":\r\n \t\t\t\t\t\tif(options.onAccepted)\r\n \t\t\t\t\t\t\toptions.onAccepted(result);\r\n \t\t\t\t\t\tdoApply = true;\r\n \t\t\t\t\t\tbreak;\r\n \t\t\t\t\tcase \"disposed\":\r\n \t\t\t\t\t\tif(options.onDisposed)\r\n \t\t\t\t\t\t\toptions.onDisposed(result);\r\n \t\t\t\t\t\tdoDispose = true;\r\n \t\t\t\t\t\tbreak;\r\n \t\t\t\t\tdefault:\r\n \t\t\t\t\t\tthrow new Error(\"Unexception type \" + result.type);\r\n \t\t\t\t}\r\n \t\t\t\tif(abortError) {\r\n \t\t\t\t\thotSetStatus(\"abort\");\r\n \t\t\t\t\treturn Promise.reject(abortError);\r\n \t\t\t\t}\r\n \t\t\t\tif(doApply) {\r\n \t\t\t\t\tappliedUpdate[moduleId] = hotUpdate[moduleId];\r\n \t\t\t\t\taddAllToSet(outdatedModules, result.outdatedModules);\r\n \t\t\t\t\tfor(moduleId in result.outdatedDependencies) {\r\n \t\t\t\t\t\tif(Object.prototype.hasOwnProperty.call(result.outdatedDependencies, moduleId)) {\r\n \t\t\t\t\t\t\tif(!outdatedDependencies[moduleId])\r\n \t\t\t\t\t\t\t\toutdatedDependencies[moduleId] = [];\r\n \t\t\t\t\t\t\taddAllToSet(outdatedDependencies[moduleId], result.outdatedDependencies[moduleId]);\r\n \t\t\t\t\t\t}\r\n \t\t\t\t\t}\r\n \t\t\t\t}\r\n \t\t\t\tif(doDispose) {\r\n \t\t\t\t\taddAllToSet(outdatedModules, [result.moduleId]);\r\n \t\t\t\t\tappliedUpdate[moduleId] = warnUnexpectedRequire;\r\n \t\t\t\t}\r\n \t\t\t}\r\n \t\t}\r\n \t\r\n \t\t// Store self accepted outdated modules to require them later by the module system\r\n \t\tvar outdatedSelfAcceptedModules = [];\r\n \t\tfor(i = 0; i < outdatedModules.length; i++) {\r\n \t\t\tmoduleId = outdatedModules[i];\r\n \t\t\tif(installedModules[moduleId] && installedModules[moduleId].hot._selfAccepted)\r\n \t\t\t\toutdatedSelfAcceptedModules.push({\r\n \t\t\t\t\tmodule: moduleId,\r\n \t\t\t\t\terrorHandler: installedModules[moduleId].hot._selfAccepted\r\n \t\t\t\t});\r\n \t\t}\r\n \t\r\n \t\t// Now in \"dispose\" phase\r\n \t\thotSetStatus(\"dispose\");\r\n \t\tObject.keys(hotAvailableFilesMap).forEach(function(chunkId) {\r\n \t\t\tif(hotAvailableFilesMap[chunkId] === false) {\r\n \t\t\t\thotDisposeChunk(chunkId);\r\n \t\t\t}\r\n \t\t});\r\n \t\r\n \t\tvar idx;\r\n \t\tvar queue = outdatedModules.slice();\r\n \t\twhile(queue.length > 0) {\r\n \t\t\tmoduleId = queue.pop();\r\n \t\t\tmodule = installedModules[moduleId];\r\n \t\t\tif(!module) continue;\r\n \t\r\n \t\t\tvar data = {};\r\n \t\r\n \t\t\t// Call dispose handlers\r\n \t\t\tvar disposeHandlers = module.hot._disposeHandlers;\r\n \t\t\tfor(j = 0; j < disposeHandlers.length; j++) {\r\n \t\t\t\tcb = disposeHandlers[j];\r\n \t\t\t\tcb(data);\r\n \t\t\t}\r\n \t\t\thotCurrentModuleData[moduleId] = data;\r\n \t\r\n \t\t\t// disable module (this disables requires from this module)\r\n \t\t\tmodule.hot.active = false;\r\n \t\r\n \t\t\t// remove module from cache\r\n \t\t\tdelete installedModules[moduleId];\r\n \t\r\n \t\t\t// remove \"parents\" references from all children\r\n \t\t\tfor(j = 0; j < module.children.length; j++) {\r\n \t\t\t\tvar child = installedModules[module.children[j]];\r\n \t\t\t\tif(!child) continue;\r\n \t\t\t\tidx = child.parents.indexOf(moduleId);\r\n \t\t\t\tif(idx >= 0) {\r\n \t\t\t\t\tchild.parents.splice(idx, 1);\r\n \t\t\t\t}\r\n \t\t\t}\r\n \t\t}\r\n \t\r\n \t\t// remove outdated dependency from module children\r\n \t\tvar dependency;\r\n \t\tvar moduleOutdatedDependencies;\r\n \t\tfor(moduleId in outdatedDependencies) {\r\n \t\t\tif(Object.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)) {\r\n \t\t\t\tmodule = installedModules[moduleId];\r\n \t\t\t\tif(module) {\r\n \t\t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\r\n \t\t\t\t\tfor(j = 0; j < moduleOutdatedDependencies.length; j++) {\r\n \t\t\t\t\t\tdependency = moduleOutdatedDependencies[j];\r\n \t\t\t\t\t\tidx = module.children.indexOf(dependency);\r\n \t\t\t\t\t\tif(idx >= 0) module.children.splice(idx, 1);\r\n \t\t\t\t\t}\r\n \t\t\t\t}\r\n \t\t\t}\r\n \t\t}\r\n \t\r\n \t\t// Not in \"apply\" phase\r\n \t\thotSetStatus(\"apply\");\r\n \t\r\n \t\thotCurrentHash = hotUpdateNewHash;\r\n \t\r\n \t\t// insert new code\r\n \t\tfor(moduleId in appliedUpdate) {\r\n \t\t\tif(Object.prototype.hasOwnProperty.call(appliedUpdate, moduleId)) {\r\n \t\t\t\tmodules[moduleId] = appliedUpdate[moduleId];\r\n \t\t\t}\r\n \t\t}\r\n \t\r\n \t\t// call accept handlers\r\n \t\tvar error = null;\r\n \t\tfor(moduleId in outdatedDependencies) {\r\n \t\t\tif(Object.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)) {\r\n \t\t\t\tmodule = installedModules[moduleId];\r\n \t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\r\n \t\t\t\tvar callbacks = [];\r\n \t\t\t\tfor(i = 0; i < moduleOutdatedDependencies.length; i++) {\r\n \t\t\t\t\tdependency = moduleOutdatedDependencies[i];\r\n \t\t\t\t\tcb = module.hot._acceptedDependencies[dependency];\r\n \t\t\t\t\tif(callbacks.indexOf(cb) >= 0) continue;\r\n \t\t\t\t\tcallbacks.push(cb);\r\n \t\t\t\t}\r\n \t\t\t\tfor(i = 0; i < callbacks.length; i++) {\r\n \t\t\t\t\tcb = callbacks[i];\r\n \t\t\t\t\ttry {\r\n \t\t\t\t\t\tcb(moduleOutdatedDependencies);\r\n \t\t\t\t\t} catch(err) {\r\n \t\t\t\t\t\tif(options.onErrored) {\r\n \t\t\t\t\t\t\toptions.onErrored({\r\n \t\t\t\t\t\t\t\ttype: \"accept-errored\",\r\n \t\t\t\t\t\t\t\tmoduleId: moduleId,\r\n \t\t\t\t\t\t\t\tdependencyId: moduleOutdatedDependencies[i],\r\n \t\t\t\t\t\t\t\terror: err\r\n \t\t\t\t\t\t\t});\r\n \t\t\t\t\t\t}\r\n \t\t\t\t\t\tif(!options.ignoreErrored) {\r\n \t\t\t\t\t\t\tif(!error)\r\n \t\t\t\t\t\t\t\terror = err;\r\n \t\t\t\t\t\t}\r\n \t\t\t\t\t}\r\n \t\t\t\t}\r\n \t\t\t}\r\n \t\t}\r\n \t\r\n \t\t// Load self accepted modules\r\n \t\tfor(i = 0; i < outdatedSelfAcceptedModules.length; i++) {\r\n \t\t\tvar item = outdatedSelfAcceptedModules[i];\r\n \t\t\tmoduleId = item.module;\r\n \t\t\thotCurrentParents = [moduleId];\r\n \t\t\ttry {\r\n \t\t\t\t__webpack_require__(moduleId);\r\n \t\t\t} catch(err) {\r\n \t\t\t\tif(typeof item.errorHandler === \"function\") {\r\n \t\t\t\t\ttry {\r\n \t\t\t\t\t\titem.errorHandler(err);\r\n \t\t\t\t\t} catch(err2) {\r\n \t\t\t\t\t\tif(options.onErrored) {\r\n \t\t\t\t\t\t\toptions.onErrored({\r\n \t\t\t\t\t\t\t\ttype: \"self-accept-error-handler-errored\",\r\n \t\t\t\t\t\t\t\tmoduleId: moduleId,\r\n \t\t\t\t\t\t\t\terror: err2,\r\n \t\t\t\t\t\t\t\torginalError: err\r\n \t\t\t\t\t\t\t});\r\n \t\t\t\t\t\t}\r\n \t\t\t\t\t\tif(!options.ignoreErrored) {\r\n \t\t\t\t\t\t\tif(!error)\r\n \t\t\t\t\t\t\t\terror = err2;\r\n \t\t\t\t\t\t}\r\n \t\t\t\t\t\tif(!error)\r\n \t\t\t\t\t\t\terror = err;\r\n \t\t\t\t\t}\r\n \t\t\t\t} else {\r\n \t\t\t\t\tif(options.onErrored) {\r\n \t\t\t\t\t\toptions.onErrored({\r\n \t\t\t\t\t\t\ttype: \"self-accept-errored\",\r\n \t\t\t\t\t\t\tmoduleId: moduleId,\r\n \t\t\t\t\t\t\terror: err\r\n \t\t\t\t\t\t});\r\n \t\t\t\t\t}\r\n \t\t\t\t\tif(!options.ignoreErrored) {\r\n \t\t\t\t\t\tif(!error)\r\n \t\t\t\t\t\t\terror = err;\r\n \t\t\t\t\t}\r\n \t\t\t\t}\r\n \t\t\t}\r\n \t\t}\r\n \t\r\n \t\t// handle errors in accept handlers and self accepted module load\r\n \t\tif(error) {\r\n \t\t\thotSetStatus(\"fail\");\r\n \t\t\treturn Promise.reject(error);\r\n \t\t}\r\n \t\r\n \t\thotSetStatus(\"idle\");\r\n \t\treturn Promise.resolve(outdatedModules);\r\n \t}\r\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {},\n \t\t\thot: hotCreateModule(moduleId),\n \t\t\tparents: (hotCurrentParentsTemp = hotCurrentParents, hotCurrentParents = [], hotCurrentParentsTemp),\n \t\t\tchildren: []\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, hotCreateRequire(moduleId));\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// __webpack_hash__\n \t__webpack_require__.h = function() { return hotCurrentHash; };\n\n \t// Load entry module and return exports\n \treturn hotCreateRequire(62)(__webpack_require__.s = 62);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3e012d885063be18e255","module.exports = require(\"react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"react-relay\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-relay\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"lodash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"react-bootstrap\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-bootstrap\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"keystone\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"keystone\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"graphql\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"graphql\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"react-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-router\"\n// module id = 6\n// module chunks = 0","import React from 'react'\nimport { Link } from 'react-router'\n\nexport default React.createClass({\n  render() {\n    return <Link {...this.props} activeClassName=\"active\"/>\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./lib/app/components/NavLink.js","module.exports = require(\"graphql-relay\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"graphql-relay\"\n// module id = 8\n// module chunks = 0","import React from 'react'\nimport { Button, Form, FormGroup, FormControl } from 'react-bootstrap'\nimport classNames from 'classnames'\nexport default class SearchBar extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            placeholder: 'Search',\n\n        }\n    }\n    render() {\n        var formClass = classNames('search-bar', this.props.formClass)\n        return (\n            <div>\n                <Form className={formClass} style={this.props.style} onSubmit={this.props.onSubmit}>\n                    <FormGroup>\n                        <FormControl type=\"text\" placeholder={this.props.placeholder || this.state.placeholder} onChange={this.props.onChange} value={this.props.value}/>\n                    </FormGroup>\n                </Form>\n            </div>\n        )\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./lib/app/components/SearchBar.js","var _ = require('lodash');\nvar logger = require('../../../logger')\n\nvar buildFind = (model, args, opts, doc) => {\n\n    var query = {\n        model,\n        where: {},\n        projection: {},\n        skip: {},\n        limit: {},\n        sort: {},\n        doc\n    };\n\n    if (args.sortField) {\n        if (_.startsWith(args.sortField, '-')) {\n            query.sort[_.trimStart(args.sortField, '-')] = -1\n        } else {\n            query.sort[args.sortField] = 1\n        }\n\n        delete args.sortField\n    }\n    if (args.book === null) {\n        delete args.book\n    }\n    if (args.language === null) {\n        delete args.language\n    }\n    if (args.first) {\n        query.limit = args.first\n        delete args.first\n    }\n    if (args.after) {\n        query.where['_id'] = { '$gt': args.after }\n        delete args.after\n    }\n    if (opts !== null) {\n        if (opts.sort) {\n            query.sort = opts.sort\n        }\n    }\n    // Temporary measure to ignore GraphQL-Relay connectionArgs and remove null fields\n    for (var x in args) {\n        if (args[x] === null) {\n            delete args[x]\n        }\n    }\n    query.where = args;\n\n    return query.model.find(query.where).\n        sort(query.sort).\n        limit(query.limit).\n        execAsync().\n        then((results) => { return results; }).\n        catch((err) => { logger.log('error', err); });\n};\nvar buildFindOne = (model, args, opts, doc) => {\n\n    var query = {\n        model,\n        where: {\n\n        },\n        projection: {\n\n        },\n        skip: {\n\n        },\n        limit: {\n\n        },\n        sort: {\n\n        },\n        doc\n    };\n    if (opts !== null) {\n        if (opts.sort)\n            query.sort = opts.sort\n    }\n    query.where = args;\n    var data = {}\n    return query.model.findByIdAsync(args.id).then((result) => { return result; }).catch((err) => { logger.log('error', err); });\n};\n\nvar queryBuilder = (op, model, args, opts, doc) => {\n\n    switch (op) {\n\n        case 'FIND':\n            return buildFind(model, args, opts, doc)\n\n        case 'FIND_ONE':\n            return buildFindOne(model, args, opts, doc)\n        default:\n            break;\n    }\n    return {};\n};\n\n\nmodule.exports = queryBuilder;\n\n\n// WEBPACK FOOTER //\n// ./lib/server/graphql/crud.js","var {\n    buildSchema,\n    GraphQLInt,\n    GraphQLList,\n    GraphQLObjectType,\n    GraphQLSchema,\n    GraphQLString,\n    GraphQLID,\n    GraphQLBoolean,\n    GraphQLNonNull,\n    GraphQLInputObjectType,\n    Graphql\n} = require('graphql');\n\nvar {\n  connectionArgs,\n    connectionDefinitions,\n    connectionFromArray,\n    cursorForObjectInConnection,\n    fromGlobalId,\n    globalIdField,\n    mutationWithClientMutationId,\n    nodeDefinitions,\n    toGlobalId,\n} = require('graphql-relay');\n\n\nvar { nodeInterface, nodeField } = require('./Node')\n\nvar SongType = new GraphQLObjectType({\n    name: 'Song',\n    fields: () => ({\n        id: globalIdField('Song'),\n        title: { type: GraphQLString, },\n        num: { type: GraphQLInt },\n        book: {\n            type: new GraphQLObjectType({\n                name: 'Book',\n                fields: () => ({\n                    name: { type: GraphQLString },\n                    abbrv: { type: GraphQLString },\n                    languages: { type: GraphQLString, }\n                })\n            })\n\n        },\n        lyrics: { type: GraphQLString },\n        lyrics_Markdown: {\n            type: new GraphQLObjectType({\n                name: 'Markdown',\n                fields: () => ({\n                    md: { type: GraphQLString },\n                    html: { type: GraphQLString }\n                })\n            })\n        },\n        lyrics_Html: { type: GraphQLString, },\n        tags: { type: GraphQLString, },\n        videos: { type: GraphQLString, },\n        references: {\n            type: new GraphQLObjectType({\n                name: 'References',\n                fields: () => ({\n                    author: { type: GraphQLString },\n                    book: { type: GraphQLString },\n                    year: { type: GraphQLString },\n                })\n\n            })\n        },\n        partitions: { type: GraphQLString, },\n        language: { type: GraphQLString },\n        songId: { type: GraphQLString, },\n        meta: {\n            type: new GraphQLObjectType({\n                name: 'Meta',\n                fields: () => ({\n                    totalViews: { type: GraphQLInt },\n                    stats: {\n                        type: new GraphQLList(new GraphQLObjectType({\n                            name: 'Stats',\n                            fields: () => ({\n                                week: { type: GraphQLInt },\n                                year: { type: GraphQLInt },\n                                day: { type: GraphQLInt },\n                                views: { type: GraphQLInt },\n                            })\n\n                        }))\n                    }\n                })\n\n            })\n        }\n    }),\n    interfaces: () => [nodeInterface],\n})\n\nmodule.exports = SongType\n\n\n// WEBPACK FOOTER //\n// ./lib/server/graphql/types/Song.js","module.exports = require(\"classnames\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"classnames\"\n// module id = 12\n// module chunks = 0","var winston = require('winston');\nrequire('winston-daily-rotate-file');\n\nvar logger = new winston.Logger({\n    transports: [\n/*        new winston.transports.Console({\n            level: 'debug',\n            handleExceptions: true,\n            json: false,\n            colorize: true\n        }),*/\n        new winston.transports.DailyRotateFile({\n            filename: 'logs/cesperance-backend.log.',\n            datePattern: 'yyyy-MM-dd',\n            prepend: false,\n            level: 'info'\n        }),\n         new winston.transports.DailyRotateFile({\n      name: 'error-file',\n      filename: 'logs/cesperance-backend-error.log',\n      level: 'error'\n    }),\n    ],\n    exitOnError: false\n});\n\nmodule.exports =  logger;\nmodule.exports.stream = {\n    write: function(message, encoding){\n        logger.info(message);\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./logger.js","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 15\n// module chunks = 0","var {\n    buildSchema,\n    GraphQLInt,\n    GraphQLList,\n    GraphQLObjectType,\n    GraphQLSchema,\n    GraphQLString,\n    GraphQLID,\n    GraphQLBoolean,\n    GraphQLNonNull,\n    Graphql\n} = require('graphql');\nvar {\n  connectionArgs,\n    connectionDefinitions,\n    connectionFromArray,\n    cursorForObjectInConnection,\n    fromGlobalId,\n    globalIdField,\n    mutationWithClientMutationId,\n    nodeDefinitions,\n    toGlobalId,\n} = require('graphql-relay');\n\nvar keystone = require('keystone')\nvar db = require('../crud')\nvar SongType = require('./Song')\n\nconst { nodeInterface, nodeField } = nodeDefinitions(\n    (globalId) => {\n        const { type, id } = fromGlobalId(globalId);\n\n        console.log(`TYPE: ${type}`)\n        switch (type) {\n            case 'Song':\n                return db('FIND_ONE', keystone.list('Song').model, { id }, null)\n            default:\n                return null\n        }\n    },\n    (obj) => {\n        return 'Song'\n\n    }\n);\n\nmodule.exports = { nodeInterface, nodeField }\n\n\n\n// WEBPACK FOOTER //\n// ./lib/server/graphql/types/Node.js","module.exports = require(\"algoliasearch\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"algoliasearch\"\n// module id = 17\n// module chunks = 0","module.exports = require(\"winston\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"winston\"\n// module id = 18\n// module chunks = 0","'use strict';\n\n// React And Redux Setup\nimport React from 'react';\nimport ReactDOMServer from 'react-dom/server';\nimport { match, RouterContext } from 'react-router';\nimport routes from '../../app/routes';\nimport graphql from '../graphql/graphqlHTTP'\nimport bodyParser from 'body-parser'\nimport Relay from 'react-relay'\nimport IsomorphicRouter from 'isomorphic-relay-router';\nimport path from 'path'\nimport logger from 'winston'\n// api\nimport songs from './api/songs';\n\nconst GRAPHQL_URL = `http://localhost:4088/graphql`;\n\nconst networkLayer = new Relay.DefaultNetworkLayer(GRAPHQL_URL);\n// Setup Route Bindings\nexports = module.exports = (app) => {\n    app.use('/graphql', bodyParser.json(), graphql());\n    // Views\n    logger.log('info', __dirname)\n    app.get('/api/songs/id/:id', songs.get)\n    app.get('/api/songs/:book', songs.list)\n    \n    // match the backend routes with the client routes\n    app.use((req, res, next) => {\n        if (req.path.match(/^\\/keystone/)) {\n            next();\n            return;\n        }\n\n        match({ routes, location: req.url }, (err, redirect, props) => {\n            if (err) {\n                res.status(500).send(err.message)\n            } else if (redirect) {\n                res.redirect(redirect.pathname + redirect.search)\n            } else if (props) {\n                IsomorphicRouter.prepareData(props, networkLayer).then(render).catch(next);\n                // hey we made it!\n                //const appHtml = renderToString(<RouterContext {...props} />)\n                //res.send(renderPage(appHtml))\n            } else {\n                res.status(404).send('Not Found')\n            }\n        })\n        function render({ data, props }) {\n            const reactOutput = ReactDOMServer.renderToString(IsomorphicRouter.render(props));\n            res.render('index.ejs', {\n                preloadedData: data,\n                reactOutput\n            });\n        }\n    });\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/server/routes/react.js","module.exports = require(\"bluebird\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bluebird\"\n// module id = 20\n// module chunks = 0","module.exports = require(\"compression\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"compression\"\n// module id = 21\n// module chunks = 0","module.exports = require(\"connect-history-api-fallback\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"connect-history-api-fallback\"\n// module id = 22\n// module chunks = 0","module.exports = require(\"connect-mongo\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"connect-mongo\"\n// module id = 23\n// module chunks = 0","module.exports = require(\"cookie-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cookie-parser\"\n// module id = 24\n// module chunks = 0","module.exports = require(\"cors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cors\"\n// module id = 25\n// module chunks = 0","module.exports = require(\"dotenv\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dotenv\"\n// module id = 26\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 27\n// module chunks = 0","module.exports = require(\"express-handlebars\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-handlebars\"\n// module id = 28\n// module chunks = 0","module.exports = require(\"express-session\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-session\"\n// module id = 29\n// module chunks = 0","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 30\n// module chunks = 0","module.exports = require(\"morgan\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"morgan\"\n// module id = 31\n// module chunks = 0","module.exports = require(\"nconf\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nconf\"\n// module id = 32\n// module chunks = 0","module.exports = require(\"request-ip\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"request-ip\"\n// module id = 33\n// module chunks = 0","module.exports = require(\"serve-favicon\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"serve-favicon\"\n// module id = 34\n// module chunks = 0","import React from 'react';\nimport ReactCSSTransitionGroup from 'react-addons-css-transition-group';\n\nimport Header from './Header'\n\nclass Base extends React.Component {\n\n    render() {\n\n        return (\n            <div className=\"wrapper\">\n                <Header />\n\n                <ReactCSSTransitionGroup\n                    component=\"section\"\n                    transitionName=\"example\"\n                    transitionEnterTimeout={500}\n                    transitionLeaveTimeout={500}\n                >\n                    <div className=\"content\">\n                        {React.cloneElement(this.props.children, {\n                            key: this.props.location.pathname\n                        })}\n                    </div>\n                </ReactCSSTransitionGroup>\n                \n            </div>\n        );\n    }\n\n}\n\nexport default Base;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/app/components/Layout/Base.js","import React from 'react'\nimport { Glyphicon, Nav, Navbar, NavItem, NavDropdown, MenuItem } from 'react-bootstrap'\nimport { LinkContainer } from 'react-router-bootstrap'\nexport default class App extends React.Component {\n    render() {\n        return (\n            <Navbar inverse collapseOnSelect className=\"header\">\n                <Navbar.Header>\n                    <Navbar.Brand>\n                        <a href=\"/\">Chants d'Espérance</a>\n                    </Navbar.Brand>\n                    <Navbar.Toggle />\n                </Navbar.Header>\n                <Navbar.Collapse>\n\n                    <Nav pullRight>\n                        <LinkContainer to=\"/search\">\n                            <NavItem eventKey={1}><Glyphicon glyph=\"search\"></Glyphicon></NavItem>\n                        </LinkContainer>\n                        <LinkContainer to=\"/about\">\n                            <NavItem eventKey={2}>About</NavItem>\n                        </LinkContainer>\n                        <LinkContainer to=\"/contactus\">\n                            <NavItem eventKey={2}>Contact Us</NavItem>\n                        </LinkContainer>\n                    </Nav>\n                </Navbar.Collapse>\n            </Navbar>\n        )\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/app/components/Layout/Header.js","import React from 'react'\nimport Relay from 'react-relay'\n\n\nclass MostViewedItem extends React.Component {\n    constructor(props) {\n        super(props)\n    }\n\n    render() {\n        var song = this.props.song\n        return (\n            <div className=\"most-viewed-item\">\n                <span>{song.num}. {song.title} {(song.meta.totalViews) ? song.meta.totalViews : 0}</span>\n            </div>\n        )\n    }\n}\n\nexport default Relay.createContainer(MostViewedItem, {\n    fragments: {\n\n        song: () => Relay.QL`\n        fragment on Song{\n                        id\n                    title\n                    num\n                    meta{\n                        totalViews\n                    }\n                    }\n                                    `\n\n    }\n})\n\n\n// WEBPACK FOOTER //\n// ./lib/app/components/MostViewedItem.js","import React from 'react'\nimport Relay from 'react-relay'\nimport MostViewedItem from './MostViewedItem'\n\nclass MostViewedList extends React.Component {\n    constructor(props) {\n        super(props)\n    }\n\n    _renderList = () => {\n        return this.props.viewer.songs.edges.map(({ node }) => {\n            return (\n                <div>\n                    <MostViewedItem\n                        song={node}\n                    />\n                </div>\n            )\n        })\n    }\n    render() {\n        return (\n            <div>\n                {this._renderList()}\n            </div>\n        )\n    }\n}\n\nexport default Relay.createContainer(MostViewedList, {\n    initialVariables: { sortField: '-meta.totalViews' },\n    prepareVariables: (prevVariables) => ({ sortField: prevVariables.sortField }),\n    fragments: {\n\n        viewer: () => Relay.QL`\n                                    fragment on Viewer {\n\n                    songs(sortField: $sortField, first:5){\n                    edges{\n                node{\n                    id\n                    title\n                    ${MostViewedItem.getFragment('song')}\n                                    }\n                                }\n                            }\n                    }`\n\n    }\n})\n\n\n// WEBPACK FOOTER //\n// ./lib/app/components/MostViewedList.js","import Relay, {\n} from 'react-relay';\n\nexport const queries = { song: () => Relay.QL`query { node(id: $id) }`, songByLocalID: () => Relay.QL`query { song(id: $id) }` }\n\n\n\n// WEBPACK FOOTER //\n// ./lib/app/queries/Song.js","import Relay, {\n} from 'react-relay';\n\nexport const queries = { viewer: () => Relay.QL`query { viewer }`}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/app/queries/Viewer.js","import React from 'react'\nimport { render } from 'react-dom'\nimport { Router, Route, browserHistory, IndexRoute, applyRouterMiddleware } from 'react-router'\nimport App from './views/App'\nimport Home from './views/Home'\nimport SongsList from './views/SongsList'\nimport Song from './views/Song'\nimport About from './views/About'\nimport Base from './components/Layout/Base'\nimport { queries as ViewerQueries } from './queries/Viewer'\nimport { queries as SongQueries } from './queries/Song'\nimport Search from './views/Search'\n/* Relay */\nimport Relay from 'react-relay'\nimport useRelay from 'react-router-relay'\nRelay.injectNetworkLayer(\n    new Relay.DefaultNetworkLayer('http://localhost:4088/graphql')\n)\n\nmodule.exports = (\n    <Router history={browserHistory}\n        environment={Relay.Store}\n        render={applyRouterMiddleware(useRelay)}\n    >\n        <Route path=\"/\" component={Base}>\n            <IndexRoute component={Home} queries={ViewerQueries} />\n            <Route path=\"/about\" component={About} />\n            <Route path=\"/songs/:book\" component={SongsList} queries={ViewerQueries}>\n            </Route>\n            <Route path=\"/songs/:book/:id\" component={Song} queries={SongQueries} />\n            <Route path=\"/search\" component={Search} />\n        </Route>\n    </Router>\n)\n\n\n\n// WEBPACK FOOTER //\n// ./lib/app/routes.js","import React from 'react'\n\nexport default class App extends React.Component {\n    render() {\n        return <div>ABOUT!</div>\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/app/views/About.js","import React from 'react'\nimport NavLink from '../components/NavLink'\n\nexport default React.createClass({\n    render() {\n        return (\n            <div>\n                <h1>React Router Tutorial</h1>\n                <ul role=\"nav\">\n                    <li><NavLink to=\"/\" onlyActiveOnIndex>Home</NavLink></li>\n                    <li><NavLink to=\"/about\">About</NavLink></li>\n                    <li><NavLink to=\"/songs/be\">Songs</NavLink></li>\n                </ul>\n                {this.props.children}\n            </div>\n        )\n    }\n})\n\n\n// WEBPACK FOOTER //\n// ./lib/app/views/App.js","import React from 'react'\nimport { Grid, Row, Col } from 'react-bootstrap'\nimport SearchBar from '../components/SearchBar'\nimport NavLink from '../components/NavLink'\nimport Relay from 'react-relay'\nimport algoliasearch from 'algoliasearch'\nimport { browserHistory } from 'react-router'\nimport MostViewedList from '../components/MostViewedList'\nconst algoliaClient = algoliasearch('NHHUYDVI5X', '3ea876b1f721606adb66a7288662b4fe', {\n    timeout: 5000\n});\n\nclass Home extends React.Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            index: algoliaClient.initIndex('cesperance'),\n            value: ''\n        }\n    }\n\n    _search = (e) => {\n        e.preventDefault();\n        var value = e.target.value\n        if (e.target.charCode == 13) {\n            alert('Enter clicked!!!');\n        }\n        const path = `/search?for=${this.state.value}`\n        browserHistory.push(path)\n    }\n    _updateValue = (e) => {\n        this.setState({\n            value: e.target.value\n        }, )\n    }\n    _renderMostViewed = () => {\n\n        return this.props.viewer.songs.edges.map(({ node }) => {\n            return (\n                <p>{node.id}</p>\n            )\n        })\n\n    }\n    render() {\n        return (\n            <Grid>\n                <Row>\n                    <Col md={9}>\n                        <h2>\n                            <span> Le Chant d'Espérance</span>\n                        </h2>\n\n                    </Col>\n                </Row>\n                <Row>\n\n                    <Col md={9} sm={12}>\n\n                        <Row>\n                            <SearchBar onSubmit={(e) => this._search(e)} value={this.state.value} onChange={(e) => { this._updateValue(e) }} />\n                        </Row>\n                        <Row>\n                            <Col md={10} mdOffset={1} >\n                                <Row>\n                                    <Col xs={6}>\n                                        <NavLink to=\"/songs/ce\">\n                                            <img src=\"/images/ce.png\" style={{ maxWidth: 60 }} />\n                                            <h5>Chant d'Esperance</h5>\n                                        </NavLink>\n                                    </Col>\n                                    <Col xs={6}>\n                                        <NavLink to=\"/songs/mj\">\n                                            <img src=\"/images/mj.png\" style={{ maxWidth: 60 }} />\n                                            <h5>Mélodies Joyeuses</h5>\n                                        </NavLink>\n                                    </Col>\n                                </Row>\n                                <Row>\n                                    <Col xs={6}>\n                                        <NavLink to=\"/songs/ee\">\n                                            <img src=\"/images/ee.png\" style={{ maxWidth: 60 }} />\n                                            <h5>Échos des Élus</h5>\n                                        </NavLink>\n                                    </Col>\n                                    <Col xs={6}>\n                                        <NavLink to=\"/songs/vr\">\n                                            <img src=\"/images/vr.png\" style={{ maxWidth: 60 }} />\n                                            <h5>La Voix du Réveil</h5>\n                                        </NavLink>\n                                    </Col>\n                                </Row>\n                                <Row>\n                                    <Col xs={6}>\n                                        <NavLink to=\"/songs/hc\">\n                                            <img src=\"/images/hc.png\" style={{ maxWidth: 60 }} />\n                                            <h5>Haiti Chante avec Radio-Lumière</h5>\n                                        </NavLink>\n                                    </Col>\n                                    <Col xs={6}>\n                                        <NavLink to=\"/songs/rn\">\n                                            <img src=\"/images/rn.png\" style={{ maxWidth: 60 }} />\n                                            <h5>Réveillons-Nous</h5>\n                                        </NavLink>\n                                    </Col>\n                                </Row>\n                                <Row>\n                                    <Col xs={6}>\n                                        <NavLink to=\"/songs/ga\">\n                                            <img src=\"/images/ga.png\" style={{ maxWidth: 60 }} />\n                                            <h5>Gloire à l'Agneau</h5>\n                                        </NavLink>\n                                    </Col>\n                                </Row>\n                            </Col>\n\n                        </Row>\n                    </Col>\n                    <Col md={3} className='side-bar-2'>\n                        <div className='most-viewed'>\n                            <span className='most-viewed-title'>Most Viewed Songs</span>\n                            <MostViewedList\n                                viewer={this.props.viewer}\n                                sortField={this.props.relay.variables.sortField}\n                            />\n                        </div>\n                    </Col>\n                </Row >\n                <Row>\n                    <Col md={12} xsHidden className='ad-banner'>\n                        <img src=\"http://placehold.it/728x90\" />\n                    </Col>\n                    <Col sm={12} smHidden mdHidden lgHidden className='ad-banner'>\n                        <img src=\"http://placehold.it/300x250\" />\n                    </Col>\n                </Row>\n            </Grid >\n        )\n    }\n}\n\nexport default Relay.createContainer(Home,\n    {\n        initialVariables: { sortField: \"-meta.totalViews\", first: 5 },\n        prepareVariables: (prevVariables) => {\n            return { sortField: prevVariables.sortField, first: prevVariables.first }\n\n        },\n        fragments: {\n\n            viewer: (variables) => Relay.QL`\n                                    fragment on Viewer {\n\n\n                    ${MostViewedList.getFragment('viewer', { sortField: variables.sortField })}\n\n                                \n                    }`\n\n        }\n    }\n)\n\n/*\nviewer: () => Relay.QL`\n                                    fragment on Viewer {\n\n                    songs(sortField: $sortField, first:5){\n                    edges{\n                node{\n                    id\n                                        title\n                num\n                book{\n                    name\n                }\n                meta{\n                    totalViews\n                    stats{\n                        views\n                        week\n                        day\n                        year\n                    }\n                }\n                                    }\n                                }\n                            }\n                    }`\n\n*/\n\n\n// WEBPACK FOOTER //\n// ./lib/app/views/Home.js","import React from 'react'\nimport { Grid, Row, Col, ListGroup, ListGroupItem } from 'react-bootstrap'\nimport SearchBar from '../components/SearchBar'\nimport NavLink from '../components/NavLink'\nimport ReactPaginate from 'react-paginate'\nimport _ from 'lodash'\nimport classNames from 'classnames'\nimport algoliasearch from 'algoliasearch'\nconst algoliaClient = algoliasearch('NHHUYDVI5X', '3ea876b1f721606adb66a7288662b4fe', {\n    timeout: 5000\n});\n\nexport default class Search extends React.Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            index: algoliaClient.initIndex('cesperance'),\n            value: (props.location.query.for) ? props.location.query.for : '',\n            data: [],\n            nbHits: 0,\n            nbPages: 1,\n            page: 0,\n            processingTimeMS: 0\n\n        }\n    }\n    componentDidMount() {\n        if (this.props.location.query.for) {\n            this.state.index.search(this.props.location.query.for, { 'hitsPerPage': 10, 'page': 0 }).then((content) => {\n                this.setState({\n                    data: content.hits,\n                    nbHits: content.nbHits,\n                    nbPages: content.nbPages,\n                    page: content.page,\n                    processingTimeMS: content.processingTimeMS\n                })\n            })\n        }\n\n\n    }\n    _fetchSearchResults = (hitsPerPage) => {\n        this.state.index.search(this.state.value, { hitsPerPage, page: this.state.page }).then((content) => {\n            this.setState({\n                data: content.hits,\n                nbHits: content.nbHits,\n                nbPages: content.nbPages,\n                page: content.page,\n                processingTimeMS: content.processingTimeMS\n            })\n        })\n    }\n    _search = (e) => {\n        e.preventDefault\n        var value = e.target.value\n        this.setState({\n            value\n        })\n        this._fetchSearchResults(10)\n    }\n    _handlePageClick = (data) => {\n        this.setState({\n            page: data.selected\n        }, () => this._fetchSearchResults(10))\n    }\n    _renderSongs = () => {\n        return this.state.data.map((obj) => {\n            var lang = (obj.language === 'ht') ? 'Kreyol' : 'Français'\n            return (\n                <div className={classNames('search-result')}>\n                    <NavLink to={`/songs/${_.lowerCase(obj.book.abbrv)}/${obj._id['$oid']}`}>\n                        <h4>\n                            <span className='search-result-title' dangerouslySetInnerHTML={{ __html: `${obj._highlightResult.title.value}` }} ></span>\n                        </h4>\n\n\n                    </NavLink>\n                    <span className='ref'> - {`${obj.num} ${obj.book.name} ${lang}`}</span>\n                    <div className='search-result-snippet'> <p dangerouslySetInnerHTML={{ __html: `${obj._snippetResult.lyrics.value}` }}></p></div>\n                </div>\n\n            )\n        })\n    }\n\n    render() {\n        return (\n            <Grid>\n                <Row >\n                    <Col md={9} sm={12} className='search-container'>\n                        <Row>\n                            <SearchBar style={{ width: '100%' }} onSubmit={(e) => this._search(e)} value={this.state.value} onChange={(e) => { this._search(e) }} />\n                        </Row>\n                        <Row>\n                            <span className='result-stats'>{`${this.state.nbHits} results found in ${this.state.processingTimeMS} ms`}</span>\n                        </Row>\n                        <Row className='search-results'>\n                            {this._renderSongs()}\n                        </Row>\n                        <Row>\n                            <ReactPaginate previousLabel={\"previous\"}\n                                nextLabel={\"next\"}\n                                breakLabel={<a href=\"\">...</a>}\n                                breakClassName={\"break-me\"}\n                                pageCount={this.state.nbPages}\n                                marginPagesDisplayed={2}\n                                pageRangeDisplayed={5}\n                                onPageChange={this._handlePageClick}\n                                containerClassName={\"pagination\"}\n                                subContainerClassName={\"pages pagination\"}\n                                activeClassName={\"active\"} />\n                        </Row>\n                    </Col>\n                    <Col md={3}>\n                    </Col>\n                </Row >\n            </Grid >\n        )\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/app/views/Search.js","import React from 'react'\nimport Relay from 'react-relay'\nimport _ from 'lodash'\n\nimport { Grid, Row, Col } from 'react-bootstrap'\n\nclass Song extends React.Component {\n\n    constructor(props){\n        super(props)\n        var song = this.props.song ? this.props.song: this.props.songByLocalID\n        this.state = {\n            song\n        }\n    }\n    render() {\n      \n        return (\n            <Grid>\n                <Row>\n                <Col md={12} className=\"title\">\n                    <h2>{`${this.state.song.num}. ${this.state.song.title}`}</h2>\n                </Col>\n                </Row>\n                <Row>\n                    <Col md={12}>\n                        <span dangerouslySetInnerHTML={{ __html: this.state.song.lyrics_Markdown.html }} className=\"lyrics\"></span>\n                    </Col>\n                </Row>\n\n            </Grid>\n        )\n    }\n}\nexport default Relay.createContainer(Song,\n    {\n        initialVariables: { id: '' },\n        prepareVariables: (prevVariables) => {\n            return { id: prevVariables.id }\n\n        },\n        fragments: {\n\n            song: () => Relay.QL`\n                    fragment on Song{\n                        id\n                    title\n                    num\n                    lyrics_Markdown{\n                        md\n                        html\n                    }\n                    }\n                `,\n            songByLocalID: () => Relay.QL`\n                    fragment on Song{\n                        id\n                    title\n                    num\n                    lyrics_Markdown{\n                        md\n                        html\n                    }\n                    }\n                `\n        }\n    }\n)             \n\n\n// WEBPACK FOOTER //\n// ./lib/app/views/Song.js","import React from 'react'\nimport Relay from 'react-relay'\nimport _ from 'lodash'\nimport { Grid, Row, Col, Button, ButtonToolbar, ListGroup, ListGroupItem } from 'react-bootstrap'\nimport SearchBar from '../components/SearchBar'\nimport classNames from 'classnames'\nimport { browserHistory } from 'react-router'\nimport NavLink from '../components/NavLink'\n\nclass SongsList extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            borderColorClass: 'ce',\n            activeLanguage: 'fr',\n            data: [],\n            filteredData: [],\n        }\n        this._fetchLanguage = this._fetchLanguage.bind(this)\n    }\n    componentDidMount() {\n        this.setState({\n            borderColorClass: this.props.params.book\n        })\n    }\n    componentWillMount() {\n        this.setState({\n            data: this.props.viewer.songs.edges,\n            filteredData: this.props.viewer.songs.edges\n        })\n    }\n    componentWillReceiveProps(nextProps) {\n        if (this.props.viewer !== nextProps.viewer) {\n            this.setState({\n                data: nextProps.viewer.songs.edges,\n                filteredData: nextProps.viewer.songs.edges\n            })\n        }\n    }\n    _renderSongs = () => {\n        return this.state.filteredData.map(({ node }) => {\n            return (\n                <ListGroupItem className={this.props.params.book}><NavLink to={`${this.props.location.pathname}/${node.id}`}>{`${node.num}. ${node.title}`}</NavLink></ListGroupItem>\n\n            )\n        })\n    }\n    _fetchLanguage = (event) => {\n\n        var lang = event.target.value\n        if (this.state.activeLanguage !== lang) {\n\n            this.setState({\n                activeLanguage: lang\n            }, () => {\n                this.props.relay.setVariables({\n                    lang\n                })\n\n            })\n\n        }\n    }\n\n    _handleSongSelect = (e) => {\n        this.context.router.push(path)\n    }\n\n    _filterSongs = (e) => {\n        var value = e.target.value\n        var str = this._removeAccentsByRegex(value);\n        const filtered = this.state.data.filter((song) => {\n            return (this._removeAccentsByRegex(_.lowerCase(`${song.node.title} ${song.node.num}`)).indexOf(_.lowerCase(str)) > -1)\n        });\n        console.log(filtered)\n        this.setState({\n            filteredData: filtered,\n        });\n\n\n    };\n    _removeAccentsByRegex = (s) => {\n        var r = _.lowerCase(s);\n        r = r.replace(new RegExp(\"\\\\s\", 'g'), \"\");\n        r = r.replace(new RegExp(\"[àáâãäå]\", 'g'), \"a\");\n        r = r.replace(new RegExp(\"æ\", 'g'), \"ae\");\n        r = r.replace(new RegExp(\"ç\", 'g'), \"c\");\n        r = r.replace(new RegExp(\"[èéêë]\", 'g'), \"e\");\n        r = r.replace(new RegExp(\"[ìíîï]\", 'g'), \"i\");\n        r = r.replace(new RegExp(\"ñ\", 'g'), \"n\");\n        r = r.replace(new RegExp(\"[òóôõö]\", 'g'), \"o\");\n        r = r.replace(new RegExp(\"œ\", 'g'), \"oe\");\n        r = r.replace(new RegExp(\"[ùúûü]\", 'g'), \"u\");\n        r = r.replace(new RegExp(\"[ýÿ]\", 'g'), \"y\");\n        r = r.replace(new RegExp(\"\\\\W\", 'g'), \"\");\n        return r;\n    }\n    render() {\n        return (\n            <Grid>\n                <Row>\n                    <Col sm={12} md={9} className=\"title\">\n                        <h2>\n                            <span>{this.props.viewer.songs.edges[0].node.book.name}</span>\n                        </h2>\n                    </Col>\n                </Row>\n                <Row>\n                    <Col sm={12} md={9}>\n                        <ButtonToolbar>\n\n                            {/* Provides extra visual weight and identifies the primary action in a set of buttons */}\n                            <Button className={classNames(\"button-primary\", this.state.activeLanguage === 'fr' ? 'active' : '')} value='fr' onClick={(e) => this._fetchLanguage(e)}> French</Button>\n\n                            {/* Indicates a successful or positive action */}\n                            <Button className={classNames(\"button-primary\", this.state.activeLanguage === 'ht' ? 'active' : '')} value='ht' onClick={(e) => this._fetchLanguage(e)} > Kreol</Button>\n                        </ButtonToolbar>\n                        <SearchBar style={{ width: '100%', paddingBottom: 20 }} placeholder=\"Filter\" onChange={(e) => this._filterSongs(e)} />\n                        <ListGroup className=\"song-list\">\n\n                            {this._renderSongs()}\n\n                        </ListGroup>\n                    </Col>\n                    <Col smHidden md={3}>\n                        <img src=\"http://placehold.it/300x150\" />\n                    </Col>\n                </Row>\n\n            </Grid>)\n    }\n}\nSongsList.contextTypes = {\n    router: React.PropTypes.object\n}\n\nexport default Relay.createContainer(SongsList,\n    {\n        initialVariables: { book: \"MJ\", lang: \"fr\", sortField: \"num\" },\n        prepareVariables: (prevVariables) => {\n            return { book: _.upperCase(prevVariables.book), lang: prevVariables.lang, sortField: prevVariables.sortField}\n\n        },\n        fragments: {\n\n            viewer: () => Relay.QL`\n                    fragment on Viewer {\n\n                    songs(book: $book, language:$lang, sortField: $sortField, first:400){\n                    edges{\n                node{\n                    id\n                                        title\n                num\n                book{\n                    name\n                }\n                                    }\n                                }\n                            }\n                    },\n                `,\n            \n        }\n    }\n)\n\n                /*{viewer.songs.map((song) =>\n                    <div key={song.id}>\n                        <span>{`${song.num} ${song.title}`}</span>\n                        <br />\n                        <span dangerouslySetInnerHTML={{ __html: song.lyrics_Markdown.html }}></span>\n                        <br />\n                        <br />\n                    </div>\n                )\n                }*/\n\n\n// WEBPACK FOOTER //\n// ./lib/app/views/SongsList.js","\nvar graphqlHTTP = require('express-graphql');\nvar QueryType = require('./query');\nvar { GraphQLSchema } = require('graphql');\n\nmodule.exports = function initGraphQL() {\n    var schema = new GraphQLSchema({\n        query: QueryType,\n      //  mutation: MutationType,\n    })\n    \n    return graphqlHTTP({\n        schema: schema,\n        graphiql: true,\n    });\n}\n\n\n// WEBPACK FOOTER //\n// ./lib/server/graphql/graphqlHTTP.js","var {\n    buildSchema,\n    GraphQLInt,\n    GraphQLList,\n    GraphQLObjectType,\n    GraphQLSchema,\n    GraphQLString,\n    GraphQLID,\n    GraphQLBoolean,\n    GraphQLNonNull,\n    GraphQLInputObjectType,\n    Graphql\n} = require('graphql');\n\nvar {\n  connectionArgs,\n    connectionDefinitions,\n    connectionFromArray,\n    cursorForObjectInConnection,\n    fromGlobalId,\n    globalIdField,\n    mutationWithClientMutationId,\n    nodeDefinitions,\n    toGlobalId,\n} = require('graphql-relay');\n\nvar keystone = require('keystone')\nvar SongType = require('./types/Song')\nvar { nodeInterface, nodeField } = require('./types/Node')\nvar db = require('./crud')\nvar Viewer = require('./types/Viewer')\n\n\n\nvar QueryType = new GraphQLObjectType({\n    name: 'Query',\n    fields: () => ({\n        node: nodeField,\n        viewer: {\n            type: Viewer,\n            resolve: (root, args) => { return {} },\n        },\n        song: {\n            type: SongType,\n            args: {\n                id: { type: new GraphQLNonNull(GraphQLID) }\n            },\n            resolve: (root, args) => db('FIND_ONE', keystone.list('Song').model, { 'id': args.id }, null).then((result) => { return result; })\n        }\n    })\n})\n\nmodule.exports = QueryType\n\n\n\n// WEBPACK FOOTER //\n// ./lib/server/graphql/query.js","var {\n    buildSchema,\n    GraphQLInt,\n    GraphQLList,\n    GraphQLObjectType,\n    GraphQLSchema,\n    GraphQLString,\n    GraphQLID,\n    GraphQLBoolean,\n    GraphQLNonNull,\n    GraphQLInputObjectType,\n    Graphql\n} = require('graphql');\n\nvar {\n  connectionArgs,\n    connectionDefinitions,\n    connectionFromArray,\n    connectionFromPromisedArray,\n    cursorForObjectInConnection,\n    fromGlobalId,\n    globalIdField,\n    mutationWithClientMutationId,\n    nodeDefinitions,\n    toGlobalId,\n} = require('graphql-relay');\n\nvar keystone = require('keystone')\nvar SongType = require('./Song')\nvar db = require('../crud')\n\nvar Viewer = new GraphQLObjectType({\n    name: 'Viewer',\n    fields: () => ({\n        songs: {\n            type: songConnection,\n            args: {\n                ...connectionArgs,\n                book: { type: GraphQLString },\n                language: { type: GraphQLString },\n                sortField: { type: GraphQLString },\n            },\n            resolve: (viewer, args) => {\n                return connectionFromPromisedArray(\n                    db('FIND', keystone.list('Song').model, args, null).then((collection) => { return collection }),\n                    args\n                )\n            },\n\n            //resolve: (root, args) => db('FIND', keystone.list('Song').model, { 'book.abbrv': args.book }, null).then((collection) => { return collection; }),\n        },\n\n    }),\n})\n\n\n\nconst {\n  connectionType: songConnection,\n} = connectionDefinitions({\n        name: 'Song',\n        nodeType: SongType,\n    });\n\nmodule.exports = Viewer\n\n\n// WEBPACK FOOTER //\n// ./lib/server/graphql/types/Viewer.js","var async = require('async'),\n    keystone = require('keystone');\n\nvar Song = keystone.list('Song');\nvar _ = require('lodash')\n/**\n * List Songs\n */\nexports.list = function (req, res) {\n    console.log(_.capitalize(req.params.book))\n    Song.model.find({ 'book.abbrv': _.upperCase(req.params.book) }, function (err, items) {\n\n        if (err) return res.apiError('database error', err);\n\n        res.send({\n            songs: items\n        });\n\n    });\n}\n\n/**\n * Get Song by ID\n */\nexports.get = function (req, res) {\n    console.log(req.params.id)\n    Song.model.findById(req.params.id).exec(function (err, item) {\n\n        if (err) return res.apiError('database error', err);\n        if (!item) return res.apiError('not found');\n\n        res.send({\n            song: item\n        });\n\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/server/routes/api/songs.js","module.exports = require(\"async\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"async\"\n// module id = 52\n// module chunks = 0","module.exports = require(\"express-graphql\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-graphql\"\n// module id = 53\n// module chunks = 0","module.exports = require(\"isomorphic-relay-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"isomorphic-relay-router\"\n// module id = 54\n// module chunks = 0","module.exports = require(\"react-addons-css-transition-group\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-addons-css-transition-group\"\n// module id = 55\n// module chunks = 0","module.exports = require(\"react-dom\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-dom\"\n// module id = 56\n// module chunks = 0","module.exports = require(\"react-dom/server\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-dom/server\"\n// module id = 57\n// module chunks = 0","module.exports = require(\"react-paginate\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-paginate\"\n// module id = 58\n// module chunks = 0","module.exports = require(\"react-router-bootstrap\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-router-bootstrap\"\n// module id = 59\n// module chunks = 0","module.exports = require(\"react-router-relay\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-router-relay\"\n// module id = 60\n// module chunks = 0","module.exports = require(\"winston-daily-rotate-file\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"winston-daily-rotate-file\"\n// module id = 61\n// module chunks = 0","// Simulate config options from your production environment by\n// customising the .env file in your project's root folder.\nrequire('dotenv').config();\nvar logger = require('./logger');\n// Require keystone\nvar keystone = require('keystone');\nvar handlebars = require('express-handlebars');\nvar compression = require('compression');\nvar cors = require('cors');\nvar bodyParser = require('body-parser');\nvar cookieParser = require('cookie-parser');\nvar session = require('express-session');\nvar MongoStore = require('connect-mongo')(session);\nvar express = require('express')\nvar path = require('path')\nvar favicon = require('serve-favicon')\nvar mongoose = require('mongoose')\nvar Promise = require('bluebird')\nvar requestIp = require('request-ip')\nvar history = require('connect-history-api-fallback');\nvar nconf = require('nconf');\nvar app = express();\n\n\nnconf.file({ file: './config.json' });\nlogger.log('info', 'STARTING APP')\n\nkeystone.mongoose = Promise.promisifyAll(mongoose);\napp.get('/js/bundle.js', (req, res) => {\n\tres.setHeader('Content-Type', 'application/javascript');\n\tres.sendFile('bundle.js', { root: `${__dirname}/` });\n});\n//app.use(express.static('public'));\napp.use(express.static('images'));\napp.use(compression());\napp.use(cors());\napp.use(bodyParser.urlencoded({ extended: false }));\napp.use(cookieParser());\napp.use(favicon(path.join(__dirname, 'public', 'favicon.ico')))\napp.use('/styles/', express.static(path.resolve(__dirname, '..', 'css')));\napp.use(require('morgan')(\"combined\", { \"stream\": logger.stream }));\nkeystone.init({\n\t'name': 'Cesperance-Backend',\n\t'brand': 'Cesperance-Backend',\n\t'compress': true,\n\t'static': 'public',\n\t'favicon': 'public/favicon.ico',\n\t'views': 'templates/views',\n\t'auto update': true,\n\t'session': true,\n\t'auth': true,\n\t'user model': 'User',\n\t'wysiwyg additional buttons': 'preview',\n\t'wysiwyg additional plugins': 'preview',\n\t'port': nconf.get('port'),\n\t'host': nconf.get('host'),\n\t'mongoose': Promise.promisifyAll(mongoose),\n\t'mongo options': nconf.get('mongoose').options\n});\n\n//keystone.app = app\nkeystone.import('./lib/server/models');\nkeystone.set('locals', {\n\t_: require('lodash'),\n\tenv: keystone.get('env'),\n\tutils: keystone.utils,\n\teditable: keystone.content.editable,\n});\nkeystone.set('routes', require('./lib/server/routes/react'));\n\nkeystone.set('nav', {\n\tposts: ['posts', 'post-categories'],\n\tusers: 'users',\n\tsongs: 'songs'\n});\n\n\n\nkeystone.start();\n\n\n\n// WEBPACK FOOTER //\n// ./keystone.js"],"sourceRoot":""}